<html>
<head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=utf-8" />
    <title>MAGELLAN</title>
   <meta content="landscape manipulation" name="keywords" />
	<style type="text/css" media="all">
	h1 {
    color: #aaaaaa;
    font-family: "Open Sans", sans-serif;
    font-size: 42px;
    font-weight: normal;
    margin-top:20px;
    margin-bottom:15px;
    padding-top:30px;
	}
	
	h2{
    color: #cccccc;
    font-family: "Open Sans", sans-serif;
    font-weight: normal;
    font-size: 18px;
    margin-top:25px;
  
	} 
	h3{
    color: #444444;
    font-family: "Open Sans", sans-serif;
    font-weight: normal;
    font-size: 18px;
    line-height: 30px;
    margin-top:25px;
    text-indent:15px;
    background-color:#BBBBBB; 
	} 
		a:link { 
        font-weight: bold; 
        text-decoration: none; 
        color: #333333;
        }
	a:visited { 
        font-weight: bold; 
        text-decoration: none; 
        color: #aaaaaa;
        }
	a:hover, a:active { 
        text-decoration: none; 
        color: #cccccc;
        }

 	#hautmain{

    background: #3f3f3f;
    font: 1.1em sans-serif;
    height:20%;
	}
   </style>

</head>
<body>

<div id="hautmain">
	<table>
	<tr>
	<td>
	<A Href="Magellan.main.html">
	<h1>MAGELLAN</h1>
	<h2>Maps of Genetical Landscapes</h2>
	</A>
	</td>
    <!-- <td><img style="float:right; margin: 0px 0px0px 0px;" src= "imgmagell.png" width="40%" height="40%"></td> -->
    </tr>
	</table>
</div >

<h3>Sections</h3>
    &nbsp;&nbsp;&nbsp;<a href="#general">General</a><br>
    &nbsp;&nbsp;&nbsp;<a href="#navigation">Navigation</a><br>
    &nbsp;&nbsp;&nbsp;<a href="#visualization">Visualization</a><br>
    &nbsp;&nbsp;&nbsp;<a href="#models">Models</a><br>
    &nbsp;&nbsp;&nbsp;<a href="#fileformat">File Format</a><br>
    &nbsp;&nbsp;&nbsp;<a href="#src">Sources and executables</a><br>
    &nbsp;&nbsp;&nbsp;<a href="#faq">FAQ</a><br>


<h3><a id="general">General</a></h3>
MAGELLAN is an integrated tool to visualize and analyze fitness landscapes of small dimension (up to 7-8 loci). It was primarily developed in the years 2012-2014 by S. Brouillet and G. Achaz for personal use,  but was subsequently made public so that other users could benefit from the work. S. Matuszewski has implemented all the multiallel landscape statistics in 2016, H. Annoni designed the final look, and L Ferretti participated in the general development.


<p>Although still unpublished, MAGELLAN should be submitted for publication in the near future. For now, if you use MAGELLAN, please cite:
   MAGELLAN: a tool to explore small fitness landscapes. S Brouillet, S Matuszewski, H Annoni, L Ferretti and G Achaz. In prep.<br>

<p>

We would be very happy to receive suggestions for improvement for MAGELLAN. If you have any comment, suggestion or bug report, or if you want to be kept informed about possible updates, please contact  <a href="http://wwwabi.snv.jussieu.fr/achaz/homepage.html">G Achaz</a>.
<h3><a id="navigation">Navigation</a></H3>

<p>MAGELLAN has 3 main pages. To access the general menu, click on the MAGELLAN logo (upper left). From there, you can:
<ol>
    <li>Generate fitness landscapes using theoretical models
    <li>Browse the published experimental landscapes
    <li>Visualize your own landscape, provided it is given in the appropriate format (see below).


</ol>
</p>

<p>All subsequent pages have sub-menus that are accessible through tabs navigation.</p>
<h3><a id="visualization">A dynamical visualization</a></H3>

All representations are based on a reference genotype that is placed on the left. All gentoypes are subsequently placed to the right at a distance that is their hamming distance (number of different loci) to the reference. Once a landscape is pictured, a sub-menu of 4 tabs is displayed:
<ol>
    <li><b>Landscape</b>: pick another experimental landscape or (re)draw a new model landscape. If the landscape was generated by a model, this menu can be used to select a different model (New) or to redraw a new realization of the same model (Redraw). 
     </li><li><b>View/draw</b>: customize the visualization (rotate landscape, log/linear scale, zoom, display/hide specific paths, ...) After any modification of this page, you have to click the "Draw" button. "Clear" will reset to default parameters. Parameters include: 
	</li>	<ul>
        <li>The "<b>Genotype on the left</b>" can be changed to 'rotate' the landscape. Quite conveniently, this is done automatically when you click on a genotype in the landscape.
        </li> <li>You can display the landscape as a <b>compact</b>  view (genotypes are just boxes, loci are not displayed) or a <b>flat</b> view (view from "the sky"). The latter one is mostly recommended  when only a subset of paths is displayed. </li>
       </li>  <li>You can adjust either the size of the whole picture (<b>height</b> and <b>width</b>) OR simply change the height.
       </li> <li>You can use either <b>linear</b> or <b>log-scale</b> (default) for fitness values. Please note that 0 values in log-scale generate an error.
       </li> <li><b>Missing values</b> can be either ignored or considered as 0.
        </li><li>Using the "<b>Min. fitness ratio</b>" cell, you can set a threshold below which the fitness of two neighbors are considered identical (neutral network). Once this ratio is set, neutral links can be displayed (in orange ), or simply hidden from the visualization.
        </li><li>To select only some paths in the landscape, you can select a "<b>From</b>" and a "<b>To</b>" genotype. This can be done by typing each of the genotypesâ€™ number, or more conveniently by alt- or shift-clicking on the genotype in the visualization.
        </li><li> Once a <b>chain</b> is selected, only edges of out-degree 1 are represented.
       </li> <li>You can only visualize mutations at a <b>given locus</b> in the landscape.</li>
        </li> <li>You can vizualise the landscape after selecting one or more <b>Fixed allele(s)</b> in the landscape.</li>
        
        </ul>
    <li><b>Save</b> is used to save the current picture. At the moment, output format are either svg or pdf </li>
    <li><b>Stats</b> displays classical summary statistics for the current visualization. Summary statistics reported here are reviewed in Szendro et al., 2013, as well as Ferretti et al., submitted. 
</li></ol>
</p>

<h3><a id="models">Model fitness landscapes</a></H3>

Whatever model is chosen, you must specify the number of loci, and the number of alleles per locus (that can be identical or variable for all loci ).  
Several classical models of fitness landscapes are provided, those reviewed in Ferretti et al., in prep. 
If mean/variance values are set to -1, uniform [0,1] random variable are drawn. Otherwise, we use Normal (&mu;,&sigma;) deviations.
<ul>
    <li><b>House of cards</b>: the fitnesses of all genotypes are iid.
    <li><b>Multiplicative</b>: the fitnesses of all mutations are independent. This is also known as the additive model (in log-scale, products become sums).
    <li><b>Kauffman NK</b>: only valid in the biallelic case. Each locus interacts with K other loci, that can be its neighbors or can be chosen randomly. Fitness are drawn in uniform [0,1].
    <li><b>RMF</b> (Rough Mount Fuji): has components of both House of Cards and Multiplicative.
    <li><b>Ising</b>: all loci are arranged sequentially, and each locus interacts with its physical neighbors. The last and the first loci will interact only if 'circular' is set. For each pair of interacting loci, there is an associated cost if both alleles are not identical (and therefore 'compatible').
    <li><b>Eggbox</b>: Each locus is either high or low fitness, with a systematic change between each neighbor.
    <li><b>Optimum</b>: Each mutated locus  produces a contribution to the fitness, according to a <b>production</B> (N(&mu;,&sigma;) or uniform) distribution and compared to an <b>optimum</B> with a (N(&mu;,&sigma;) or uniform) distribution
    <li><b>Full models</b>: The fitness is computed with differents part of the previous models depending on the choosen parameters described above.
</ul>

<h3><a id="fileformat">File Format</a></H3>

<p>The first line sets the number of alleles for each locus. Therefore, it has L columns separated by spaces, where L is the numbers of loci.

<p>Each subsequent line represents a genotype (a sequence of alleles) followed by the associated fitness value. Further information may be added after the fitness values, which is ignored.
<p>

<p>A file for 3 loci with 2 alleles each would look like:
<code><BR>
#description of landscape on one line; must begin by '#' (this line is optional)
2 2 2 <BR>
0 0 0 0.5<BR>
0 0 1 0.7<BR>
0 1 1 0.2<BR>
0 1 0 1.2<BR>
1 0 1 1.3<BR>
1 1 0 5 <BR>
1 0 0 0.7 <BR>
1 1 1 7.1 <BR>
</code>
<h3><a id="src">Sources and executables</a></h3>
<p>Magellan command line source code can be dowloaded <a Href="latest.tgz">here</A>
<p>You can also download a set of executable binaries for
<UL>
<!--
<LI><a href="fl_formac.zip">Macintosh</A></LI>
<LI><a href="fl_forunix.zip">Unix</A> </LI>
<LI><a href="fl_forwin.zip">Windows</A></LI>
-->
<LI><a href="fl_formac.zip">Macintosh</A></LI>
<LI><a href="fl_forunix.zip">Unix</A> </LI>
<LI>Windows</LI>

</UL>

<h3><a id="faq">FAQ</a></h3>
<UL>
<LI><b>Q: No landscape is displayed when I clic "Draw"</b><br>
    A: We suggest that you check for <a Href="http://html5test.com/" target="_blank"> HTML5 compatibility.</A> You can also try to visualize a published experimental fitness landscape to see if it works.</LI>
 <LI><b>Q: There is a light grey menu hidding the landscape. How can I make it disapear?" </b><br>
	 A: Just click on the grey title above. One more click will show the light grey menu again.</LI>
</UL>
<body>
</html>